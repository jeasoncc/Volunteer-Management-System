# å¾€ç”Ÿè€…ç®¡ç†æ¨¡å— - å®ç°å®Œæˆ

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ•°æ®ç±»å‹å®šä¹‰
**æ–‡ä»¶**: `apps/web/src/types/index.ts`

æ–°å¢ç±»å‹ï¼š
- `Deceased` - å¾€ç”Ÿè€…ç±»å‹
- `ChantingSchedule` - åŠ©å¿µæ’ç­ç±»å‹

### 2. æœåŠ¡å±‚
**æ–‡ä»¶**: 
- `apps/web/src/services/deceased.ts` - å¾€ç”Ÿè€…æœåŠ¡
- `apps/web/src/services/chanting.ts` - åŠ©å¿µæ’ç­æœåŠ¡

**åŠŸèƒ½**:
- âœ… è·å–å¾€ç”Ÿè€…åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
- âœ… è·å–å¾€ç”Ÿè€…è¯¦æƒ…
- âœ… åˆ›å»ºå¾€ç”Ÿè€…
- âœ… æ›´æ–°å¾€ç”Ÿè€…ä¿¡æ¯
- âœ… åˆ é™¤å¾€ç”Ÿè€…
- âœ… æ‰¹é‡åˆ é™¤
- âœ… æœç´¢å¾€ç”Ÿè€…

### 3. è¡¨å•ç»„ä»¶
**æ–‡ä»¶**: `apps/web/src/components/DeceasedForm.tsx`

**åŠŸèƒ½**:
- âœ… ç¾åŒ–çš„è¡¨å•è®¾è®¡ï¼ˆå¡ç‰‡åˆ†ç»„ï¼‰
- âœ… å®Œæ•´çš„å­—æ®µæ”¯æŒ
- âœ… è¡¨å•éªŒè¯
- âœ… é”™è¯¯æç¤º
- âœ… å›¾æ ‡å¢å¼º

**è¡¨å•åˆ†ç»„**:
1. **åŸºæœ¬ä¿¡æ¯** - å§“åã€ç§°è°“ã€æ€§åˆ«ã€å¹´é¾„ã€å¾€ç”Ÿæ—¥æœŸç­‰
2. **å®—æ•™ä¿¡æ¯** - å®—æ•™ä¿¡ä»°ã€æ˜¯å¦å‡ºå®¶ã€å¾€ç”ŸåŸå› 
3. **è”ç³»ä¿¡æ¯** - å®¶å±è”ç³»äººã€å…³ç³»ã€ç”µè¯ã€åœ°å€
4. **å…¶ä»–ä¿¡æ¯** - ç‰¹æ®Šå¤‡æ³¨ã€ä¸§è‘¬å®‰æ’

### 4. åˆ—è¡¨é¡µé¢
**æ–‡ä»¶**: `apps/web/src/routes/deceased.tsx`

**åŠŸèƒ½**:
- âœ… å¾€ç”Ÿè€…åˆ—è¡¨å±•ç¤º
- âœ… åˆ†é¡µåŠŸèƒ½
- âœ… æ·»åŠ å¾€ç”Ÿè€…
- âœ… ç¼–è¾‘å¾€ç”Ÿè€…
- âœ… åˆ é™¤å¾€ç”Ÿè€…ï¼ˆå¸¦ç¡®è®¤å¯¹è¯æ¡†ï¼‰
- âœ… ç»Ÿè®¡å¡ç‰‡
- âœ… ç©ºçŠ¶æ€å¤„ç†
- âœ… åŠ è½½çŠ¶æ€
- âœ… Toast é€šçŸ¥

### 5. å¯¼èˆªé›†æˆ
**ä¿®æ”¹æ–‡ä»¶**:
- `apps/web/src/components/app-sidebar.tsx` - æ·»åŠ ä¾§è¾¹æ èœå•
- `apps/web/src/routes/index.tsx` - æ·»åŠ é¦–é¡µå¿«æ·å…¥å£

---

## ğŸ“Š æ•°æ®åº“å­—æ®µæ˜ å°„

### å¾€ç”Ÿè€…è¡¨ (deceased)

| æ•°æ®åº“å­—æ®µ | å‰ç«¯å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|-----------|---------|------|------|
| id | id | number | ä¸»é”® |
| name | name | string | å§“å * |
| title | title | string | ç§°è°“ * |
| chant_number | chantNumber | string | åŠ©å¿µç¼–å· |
| chant_position | chantPosition | enum | åŠ©å¿µä½ç½® |
| gender | gender | enum | æ€§åˆ« * |
| death_date | deathDate | string | å¾€ç”Ÿæ—¥æœŸ * |
| death_time | deathTime | string | å¾€ç”Ÿæ—¶é—´ |
| age | age | number | å¹´é¾„ |
| birth_date | birthDate | string | å‡ºç”Ÿæ—¥æœŸ |
| religion | religion | string | å®—æ•™ä¿¡ä»° |
| is_ordained | isOrdained | boolean | æ˜¯å¦å‡ºå®¶ |
| address | address | string | åœ°å€ * |
| cause_of_death | causeOfDeath | string | å¾€ç”ŸåŸå›  |
| family_contact | familyContact | string | å®¶å±è”ç³»äºº |
| family_relationship | familyRelationship | string | å®¶å±å…³ç³» |
| phone | familyPhone | string | è”ç³»ç”µè¯ * |
| special_notes | specialNotes | string | ç‰¹æ®Šå¤‡æ³¨ |
| funeral_arrangements | funeralArrangements | string | ä¸§è‘¬å®‰æ’ |
| created_at | createdAt | string | åˆ›å»ºæ—¶é—´ |

---

## ğŸ¨ UI è®¾è®¡ç‰¹ç‚¹

### è¡¨å•è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¸ åŸºæœ¬ä¿¡æ¯ï¼ˆä¸»é¢˜è‰²è¾¹æ¡†ï¼‰        â”‚
â”‚  ğŸ‘¤ å§“å *    ğŸ“ ç§°è°“ *         â”‚
â”‚  ğŸ‘¥ æ€§åˆ« *    ğŸ‚ å¹´é¾„           â”‚
â”‚  ğŸ“… å‡ºç”Ÿæ—¥æœŸ  âš°ï¸ å¾€ç”Ÿæ—¥æœŸ *     â”‚
â”‚  ğŸ• å¾€ç”Ÿæ—¶é—´  ğŸ”¢ åŠ©å¿µç¼–å·       â”‚
â”‚  ğŸ  åŠ©å¿µä½ç½®                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â¤ï¸ å®—æ•™ä¿¡æ¯ï¼ˆè“è‰²è¾¹æ¡†ï¼‰          â”‚
â”‚  â›ª å®—æ•™ä¿¡ä»°  ğŸ‘¨â€ğŸ¦² æ˜¯å¦å‡ºå®¶      â”‚
â”‚  ğŸ“ å¾€ç”ŸåŸå›                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ è”ç³»ä¿¡æ¯ï¼ˆç»¿è‰²è¾¹æ¡†ï¼‰          â”‚
â”‚  ğŸ‘¤ å®¶å±è”ç³»äºº  ğŸ”— å…³ç³»         â”‚
â”‚  ğŸ“ è”ç³»ç”µè¯ *  ğŸ“ åœ°å€ *       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ å…¶ä»–ä¿¡æ¯ï¼ˆæ©™è‰²è¾¹æ¡†ï¼‰          â”‚
â”‚  âš ï¸ ç‰¹æ®Šå¤‡æ³¨                    â”‚
â”‚  âš°ï¸ ä¸§è‘¬å®‰æ’                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆ—è¡¨é¡µé¢
- è¡¨æ ¼å±•ç¤º
- åˆ†é¡µæ§åˆ¶
- æ“ä½œæŒ‰é’®ï¼ˆç¼–è¾‘ã€åˆ é™¤ï¼‰
- ç»Ÿè®¡å¡ç‰‡
- ç©ºçŠ¶æ€å¼•å¯¼

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. è®¿é—®å¾€ç”Ÿè€…ç®¡ç†
```
æ–¹å¼1: ä¾§è¾¹æ  â†’ å¾€ç”Ÿè€…ç®¡ç†
æ–¹å¼2: é¦–é¡µ â†’ å¾€ç”Ÿè€…ç®¡ç†å¡ç‰‡
æ–¹å¼3: ç›´æ¥è®¿é—® /#/deceased
```

### 2. æ·»åŠ å¾€ç”Ÿè€…
```
1. ç‚¹å‡»"æ·»åŠ å¾€ç”Ÿè€…"æŒ‰é’®
2. å¡«å†™è¡¨å•ï¼ˆå¿…å¡«é¡¹ï¼šå§“åã€ç§°è°“ã€æ€§åˆ«ã€å¾€ç”Ÿæ—¥æœŸã€åœ°å€ã€è”ç³»ç”µè¯ï¼‰
3. ç‚¹å‡»"åˆ›å»ºå¾€ç”Ÿè€…"
4. æˆåŠŸåæ˜¾ç¤º Toast é€šçŸ¥
```

### 3. ç¼–è¾‘å¾€ç”Ÿè€…
```
1. åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®
2. ä¿®æ”¹ä¿¡æ¯
3. ç‚¹å‡»"ä¿å­˜æ›´æ–°"
```

### 4. åˆ é™¤å¾€ç”Ÿè€…
```
1. åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»"åˆ é™¤"æŒ‰é’®
2. ç¡®è®¤å¯¹è¯æ¡†ä¸­ç¡®è®¤
3. åˆ é™¤æˆåŠŸåæ˜¾ç¤º Toast é€šçŸ¥
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### åç«¯æ¥å£è¦æ±‚

å¾€ç”Ÿè€…ç®¡ç†æ¨¡å—éœ€è¦åç«¯å®ç°ä»¥ä¸‹æ¥å£ï¼š

#### 1. è·å–åˆ—è¡¨
```
GET /api/deceased
Query: page, limit, keyword, gender, chantPosition, startDate, endDate
Response: { success, data: { data: [], total, page, pageSize, totalPages } }
```

#### 2. è·å–è¯¦æƒ…
```
GET /api/deceased/:id
Response: { success, data: Deceased }
```

#### 3. åˆ›å»º
```
POST /api/deceased
Body: CreateDeceasedParams
Response: { success, data: Deceased }
```

#### 4. æ›´æ–°
```
PUT /api/deceased/:id
Body: Partial<CreateDeceasedParams>
Response: { success, data: Deceased }
```

#### 5. åˆ é™¤
```
DELETE /api/deceased/:id
Response: { success }
```

#### 6. æ‰¹é‡åˆ é™¤
```
POST /api/deceased/batch/delete
Body: { ids: number[] }
Response: { success }
```

#### 7. æœç´¢
```
GET /api/deceased/search
Query: keyword, limit
Response: { success, data: Deceased[] }
```

---

## ğŸ“ åç»­å·¥ä½œ

### ä¸‹ä¸€æ­¥ï¼šåŠ©å¿µæ’ç­æ¨¡å—

éœ€è¦å®ç°ï¼š
1. âœ… æœåŠ¡å±‚å·²åˆ›å»º (`chanting.ts`)
2. â³ æ’ç­è¡¨å•ç»„ä»¶
3. â³ æ’ç­åˆ—è¡¨é¡µé¢
4. â³ æ—¥å†è§†å›¾
5. â³ ä¹‰å·¥åˆ†é…åŠŸèƒ½
6. â³ çŠ¶æ€ç®¡ç†

### å…¶ä»–å¾…å®Œå–„åŠŸèƒ½

1. **å¾€ç”Ÿè€…è¯¦æƒ…é¡µé¢**
   - æŸ¥çœ‹å®Œæ•´ä¿¡æ¯
   - å…³è”çš„åŠ©å¿µæ’ç­
   - æ“ä½œå†å²

2. **é«˜çº§åŠŸèƒ½**
   - æœç´¢åŠŸèƒ½
   - é«˜çº§ç­›é€‰
   - æ‰¹é‡æ“ä½œ
   - æ•°æ®å¯¼å‡º

3. **æ¢è®¿å›¢é˜Ÿç®¡ç†**
   - æ¢è®¿è®°å½•
   - å›¢é˜Ÿæˆå‘˜
   - æ¢è®¿æ—¶é—´

---

## ğŸ‰ æ€»ç»“

å¾€ç”Ÿè€…ç®¡ç†æ¨¡å—çš„åŸºç¡€åŠŸèƒ½å·²å®Œæˆï¼

**å·²å®ç°**:
- âœ… å®Œæ•´çš„ CRUD æ“ä½œ
- âœ… ç¾åŒ–çš„è¡¨å•è®¾è®¡
- âœ… åˆ†é¡µåŠŸèƒ½
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- âœ… Toast é€šçŸ¥
- âœ… ç¡®è®¤å¯¹è¯æ¡†
- âœ… å¯¼èˆªé›†æˆ

**ç‰¹ç‚¹**:
- ğŸ¨ ç¾è§‚çš„ UI è®¾è®¡
- ğŸ“± å“åº”å¼å¸ƒå±€
- âš¡ æµç•…çš„äº¤äº’
- ğŸ”’ å®Œæ•´çš„éªŒè¯
- ğŸ’¡ å‹å¥½çš„æç¤º

ç°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨å¾€ç”Ÿè€…ç®¡ç†åŠŸèƒ½äº†ï¼ğŸš€

ä¸‹ä¸€æ­¥å»ºè®®å®ç°åŠ©å¿µæ’ç­æ¨¡å—ï¼Œå®Œæˆæ ¸å¿ƒä¸šåŠ¡é—­ç¯ã€‚
