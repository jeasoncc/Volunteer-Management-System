<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¹‰å·¥æ•°æ®æ£€æŸ¥å·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .input-group {
            margin: 20px 0;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        button {
            background: #4CAF50;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }
        button:hover {
            background: #45a049;
        }
        .results {
            margin-top: 30px;
        }
        .volunteer-card {
            background: #f9f9f9;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 4px solid #4CAF50;
        }
        .volunteer-card.missing {
            border-left-color: #ff9800;
            background: #fff3e0;
        }
        .stats {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .stat-box {
            flex: 1;
            padding: 20px;
            border-radius: 4px;
            text-align: center;
        }
        .stat-box.existing {
            background: #e8f5e9;
            color: #2e7d32;
        }
        .stat-box.missing {
            background: #fff3e0;
            color: #f57c00;
        }
        .stat-number {
            font-size: 36px;
            font-weight: bold;
        }
        .stat-label {
            font-size: 14px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” ä¹‰å·¥æ•°æ®æ£€æŸ¥å·¥å…·</h1>
        
        <div class="input-group">
            <label for="apiUrl">APIåœ°å€ï¼š</label>
            <input type="text" id="apiUrl" value="http://localhost:3000/api/volunteer" 
                   placeholder="è¾“å…¥APIåœ°å€">
        </div>
        
        <button onclick="checkVolunteers()">å¼€å§‹æ£€æŸ¥</button>
        
        <div class="results" id="results" style="display:none;">
            <h2>æ£€æŸ¥ç»“æœ</h2>
            <div class="stats">
                <div class="stat-box existing">
                    <div class="stat-number" id="existingCount">0</div>
                    <div class="stat-label">å·²å­˜åœ¨</div>
                </div>
                <div class="stat-box missing">
                    <div class="stat-number" id="missingCount">0</div>
                    <div class="stat-label">éœ€è¦æ·»åŠ </div>
                </div>
            </div>
            
            <h3>éœ€è¦æ·»åŠ çš„ä¹‰å·¥ï¼š</h3>
            <div id="missingList"></div>
            
            <h3>å·²å­˜åœ¨çš„ä¹‰å·¥ï¼š</h3>
            <div id="existingList"></div>
        </div>
    </div>

    <script>
        // æ‰€æœ‰éœ€è¦æ£€æŸ¥çš„ä¹‰å·¥æ•°æ®
        const allVolunteers = [
            { name: "æ—æ¥šç«‹", idNumber: "440513199709122913", phone: "17512087450", volunteerId: "0000723721" },
            { name: "æˆ¿çŸ³å®‰", idNumber: "445281198404086317", phone: "18680836552", volunteerId: "0000704055" },
            { name: "é’Ÿç¤¼å…µ", idNumber: "360521197504294819", phone: "18938641964", volunteerId: "0000692349" },
            { name: "é™¶å°å¦¹", idNumber: "360111196504012528", phone: "19860018709", volunteerId: "0000464036" },
            { name: "å¼ æ–‡æˆˆ", idNumber: "420106195311256340", phone: "15112599967", volunteerId: "0000345780" },
            { name: "ç‹æˆå±±", idNumber: "422429195905221797", phone: "15323898481", volunteerId: "0099141706" },
            { name: "å½­ä¸œå¨¥", idNumber: "430421195611264643", phone: "13613081786", volunteerId: "0000997387" },
            { name: "æ¨ç§€æ•", idNumber: "441203197601250545", phone: "13809886462", volunteerId: "0700299295" },
            { name: "é™ˆè‰", idNumber: "433123198505240026", phone: "13428749159", volunteerId: "0000308314" },
            { name: "åˆ˜é“¶è", idNumber: "610104196511051128", phone: "13902949898", volunteerId: "0000119653" },
            { name: "ä¸¥å°è‹±", idNumber: "441623197904160026", phone: "13424314311", volunteerId: "1700093607" },
            { name: "æœ±ç¢§ä¸½", idNumber: "441523197301256760", phone: "13670084694", volunteerId: "1700231375" },
            { name: "å¼ å‡¤å…°", idNumber: "232700196210122023", phone: "13845762218", volunteerId: "0000702442" },
            { name: "é™ˆç’‹", idNumber: "610424199309287618", phone: "13129546291", volunteerId: "0300207442" },
            { name: "å´å´´", idNumber: "220203197703293026", phone: "15013883666", volunteerId: "0000015846" },
            { name: "æ±ªé‡‘è‹±", idNumber: "420204195203014523", phone: "18002514316", volunteerId: "0099127522" },
            { name: "é™ˆèè", idNumber: "43102519890730004X", phone: "17717592025", volunteerId: "0000685907" },
            { name: "æ¸¸é”¦ç§€", idNumber: "422431195303152183", phone: "15871763405", volunteerId: "0000766192" },
            { name: "åˆ˜æ´é¦™", idNumber: "442529196911257423", phone: "15994839048", volunteerId: "0000660333" },
            { name: "èŒƒå¨˜ç”µ", idNumber: "442531195905306337", phone: "18319431574", volunteerId: "0000303553" },
            { name: "é«˜ä¸½è", idNumber: "44524199209041524", phone: "13715259350", volunteerId: "0000080841" },
            { name: "åº„ç¾å›", idNumber: "441523196809236766", phone: "13715259350", volunteerId: "0000306280" },
            { name: "åˆ˜æ˜¥è‰³", idNumber: "152127197210131829", phone: "18041122297", volunteerId: "0000729915" },
            { name: "ç‹æµ·ç‡•", idNumber: "440924197109172767", phone: "13512742586", volunteerId: "" },
            { name: "åˆ˜å®‹å¹³", idNumber: "442522196611254429", phone: "13728866373", volunteerId: "0000787460" },
            { name: "æŸ´å…‰ä¿Š", idNumber: "411222195106180038", phone: "18039258751", volunteerId: "0000662883" },
            { name: "å²æ “é¦™", idNumber: "411222196009160021", phone: "18039258752", volunteerId: "0000662883" },
            { name: "å‡Œè‹±", idNumber: "441521196603141320", phone: "18938905495", volunteerId: "" },
            { name: "æ—æŸ³å…°", idNumber: "440582198111030086", phone: "13714196377", volunteerId: "0000727017" },
            { name: "ç‹å»·äº‘", idNumber: "132235197410065549", phone: "17733907831", volunteerId: "0000721050" },
            { name: "æé›ªæ¢…", idNumber: "440623195006202327", phone: "13794607324", volunteerId: "0000044929" },
            { name: "è“è´¢å¨£", idNumber: "440321195712064620", phone: "", volunteerId: "0000669988" }
            // ... å¯ä»¥ç»§ç»­æ·»åŠ æ›´å¤šä¹‰å·¥
        ];

        async function checkVolunteers() {
            const apiUrl = document.getElementById('apiUrl').value;
            const resultsDiv = document.getElementById('results');
            const missingList = document.getElementById('missingList');
            const existingList = document.getElementById('existingList');
            
            resultsDiv.style.display = 'block';
            missingList.innerHTML = '<p>æ£€æŸ¥ä¸­...</p>';
            existingList.innerHTML = '<p>æ£€æŸ¥ä¸­...</p>';
            
            const existing = [];
            const missing = [];
            
            for (const volunteer of allVolunteers) {
                try {
                    // ä½¿ç”¨èº«ä»½è¯å·æŸ¥è¯¢
                    const response = await fetch(`${apiUrl}?idNumber=${volunteer.idNumber}`);
                    
                    if (response.ok) {
                        const data = await response.json();
                        if (data.volunteers && data.volunteers.length > 0) {
                            existing.push(volunteer);
                        } else {
                            missing.push(volunteer);
                        }
                    } else {
                        missing.push(volunteer);
                    }
                } catch (error) {
                    console.error(`æ£€æŸ¥ ${volunteer.name} æ—¶å‡ºé”™:`, error);
                    missing.push(volunteer);
                }
                
                // æ›´æ–°è¿›åº¦
                document.getElementById('existingCount').textContent = existing.length;
                document.getElementById('missingCount').textContent = missing.length;
            }
            
            // æ˜¾ç¤ºç»“æœ
            displayResults(missing, existing);
        }
        
        function displayResults(missing, existing) {
            const missingList = document.getElementById('missingList');
            const existingList = document.getElementById('existingList');
            
            if (missing.length === 0) {
                missingList.innerHTML = '<p>âœ… æ‰€æœ‰ä¹‰å·¥éƒ½å·²å­˜åœ¨ï¼</p>';
            } else {
                missingList.innerHTML = missing.map(v => `
                    <div class="volunteer-card missing">
                        <strong>${v.name}</strong><br>
                        èº«ä»½è¯ï¼š${v.idNumber}<br>
                        æ‰‹æœºå·ï¼š${v.phone}<br>
                        æ·±åœ³ä¹‰å·¥å·ï¼š${v.volunteerId || 'æ— '}
                    </div>
                `).join('');
            }
            
            if (existing.length === 0) {
                existingList.innerHTML = '<p>âŒ æ²¡æœ‰æ‰¾åˆ°å·²å­˜åœ¨çš„ä¹‰å·¥</p>';
            } else {
                existingList.innerHTML = existing.map(v => `
                    <div class="volunteer-card">
                        <strong>${v.name}</strong><br>
                        èº«ä»½è¯ï¼š${v.idNumber}<br>
                        æ‰‹æœºå·ï¼š${v.phone}<br>
                        æ·±åœ³ä¹‰å·¥å·ï¼š${v.volunteerId || 'æ— '}
                    </div>
                `).join('');
            }
        }
    </script>
</body>
</html>