# 实时压缩示例功能

## 功能说明

在压缩配置对话框中，每个策略下方会显示**实时的压缩示例**，当你修改参数时，示例会自动更新。

## 界面展示

### 基础配置示例

```
┌─────────────────────────────────────────────────────────┐
│ 压缩阈值 (KB)                目标大小 (KB)              │
│ [800]                        [500]                      │
│ 超过此大小的照片将被压缩      压缩后的目标大小（参考值）  │
│ ┌─────────────────────────┐ ┌─────────────────────────┐│
│ │示例：700KB 照片 → 不压缩✓│ │目标：压缩到 500KB 左右  ││
│ └─────────────────────────┘ └─────────────────────────┘│
└─────────────────────────────────────────────────────────┘
```

### 策略示例

```
┌─────────────────────────────────────────────────────────┐
│ 策略 1                              超大照片：适度压缩   │
│                                                          │
│ 最小大小 (KB)    压缩质量 (%)    最大宽度 (px)          │
│ [3200]          [88]            [1920]                  │
│                                                          │
│ 描述                                                     │
│ [超大照片：适度压缩]                                     │
│                                                          │
│ ─────────────────────────────────────────────────────   │
│ 压缩示例：                                               │
│ 4500KB → 约 648KB (压缩 86%)                            │
└─────────────────────────────────────────────────────────┘
```

## 示例计算逻辑

### 策略 1（超大照片）
- **示例照片**：4500KB (4.5MB)
- **参数**：质量 88%，最大宽度 1920px
- **计算**：
  - 尺寸缩放：3000px → 1920px，面积缩放 = (1920/3000)² ≈ 0.41
  - 质量因子：88% = 0.88
  - 压缩后：4500KB × 0.41 × 0.88 ≈ 648KB
- **显示**：`4500KB → 约 648KB (压缩 86%)`

### 策略 2（大照片）
- **示例照片**：2000KB (2MB)
- **参数**：质量 90%，最大宽度 1920px
- **计算**：
  - 尺寸缩放：3000px → 1920px，面积缩放 = (1920/3000)² ≈ 0.41
  - 质量因子：90% = 0.90
  - 压缩后：2000KB × 0.41 × 0.90 ≈ 369KB
- **显示**：`2000KB → 约 369KB (压缩 82%)`

### 策略 3（中等照片）
- **示例照片**：1200KB (1.2MB)
- **参数**：质量 92%，最大宽度 1920px
- **计算**：
  - 尺寸缩放：3000px → 1920px，面积缩放 = (1920/3000)² ≈ 0.41
  - 质量因子：92% = 0.92
  - 压缩后：1200KB × 0.41 × 0.92 ≈ 227KB
- **显示**：`1200KB → 约 227KB (压缩 81%)`

## 实时更新示例

### 场景 1：提高压缩质量

**修改前：**
```
策略 1: 质量 88%
示例：4500KB → 约 648KB (压缩 86%)
```

**修改为 92%：**
```
策略 1: 质量 92%
示例：4500KB → 约 678KB (压缩 85%)  ← 自动更新
```

### 场景 2：增加最大宽度

**修改前：**
```
策略 1: 最大宽度 1920px
示例：4500KB → 约 648KB (压缩 86%)
```

**修改为 2560px：**
```
策略 1: 最大宽度 2560px
示例：4500KB → 约 1188KB (压缩 74%)  ← 自动更新
```

### 场景 3：调整压缩阈值

**修改前：**
```
压缩阈值: 800KB
示例：700KB 照片 → 不压缩 ✓
```

**修改为 1000KB：**
```
压缩阈值: 1000KB
示例：900KB 照片 → 不压缩 ✓  ← 自动更新
```

## 使用建议

### 1. 如果压缩后太小（容易失败）

**观察示例：**
```
策略 2: 2000KB → 约 180KB (压缩 91%)  ← 压缩太狠！
```

**调整方案：**
- 提高质量：90% → 94%
- 增加宽度：1920px → 2560px

**调整后示例：**
```
策略 2: 2000KB → 约 520KB (压缩 74%)  ← 更合理！
```

### 2. 如果压缩后太大（网络慢）

**观察示例：**
```
策略 1: 4500KB → 约 900KB (压缩 80%)  ← 还是太大
```

**调整方案：**
- 降低质量：88% → 85%
- 减小宽度：1920px → 1280px

**调整后示例：**
```
策略 1: 4500KB → 约 450KB (压缩 90%)  ← 更小了！
```

## 技术实现

### 估算公式

```typescript
压缩后大小 = 原始大小 × 尺寸缩放² × 质量因子

其中：
- 尺寸缩放 = min(1, 最大宽度 / 原始宽度)
- 质量因子 = 压缩质量 / 100
```

### 示例照片选择

根据策略的最小大小自动选择合适的示例：
- 策略1 (> 3200KB) → 使用 4500KB 示例
- 策略2 (> 1600KB) → 使用 2000KB 示例
- 策略3 (> 800KB) → 使用 1200KB 示例

## 优势

1. **直观可见** - 不用猜测，直接看到压缩效果
2. **实时反馈** - 修改参数立即看到结果
3. **辅助决策** - 帮助你找到最佳的压缩参数
4. **避免错误** - 防止设置过度压缩导致失败

## 注意事项

1. 示例是**估算值**，实际压缩结果可能有 ±20% 的偏差
2. 不同照片的压缩效果可能不同（取决于内容复杂度）
3. 建议先用示例调整到合理范围，再实际测试
4. 如果实际效果与示例差异较大，可以微调参数
