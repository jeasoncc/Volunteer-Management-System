# 🧪 测试批量导入说明

## 📁 测试文件

**文件名：** `test_import_5_volunteers.csv`

## 👥 包含的义工数据

| 序号 | 姓名 | 手机号 | 深圳义工号 | 备注 |
|------|------|--------|------------|------|
| 1 | 刘金艳 | 13128851618 | 无 | 女，1990年 |
| 2 | 欧阳钟培 | 13923923911 | 无 | 男，1986年，有邮箱 |
| 3 | 柯映卿 | 13049887669 | 无 | 女，1970年，法名：妙清 |
| 4 | 郭奕丽 | 13662230864 | 0099120567 | 女，1958年，法名：顿奕 |
| 5 | 刘新娣 | 14774907851 | 1700251470 | 女，1951年，法名：顿娣 |

## 📋 包含的字段

CSV文件包含完整的16个字段：

1. ✅ 姓名
2. ✅ 手机号
3. ✅ 身份证号
4. ✅ 性别
5. ✅ 出生日期
6. ✅ 深圳义工号（2人有，3人无）
7. ✅ 微信号
8. ✅ 邮箱（1人有）
9. ✅ 地址
10. ✅ 学历
11. ✅ 宗教背景（全部：佛教）
12. ✅ 皈依状态（全部：皈依）
13. ✅ 健康状况（全部：很好）
14. ✅ 法名（3人有）
15. ✅ 紧急联系人（空）
16. ✅ 紧急联系电话（空）

## 🚀 测试步骤

### 1. 准备测试

1. **确认文件存在**
   - 文件名：`test_import_5_volunteers.csv`
   - 位置：项目根目录

2. **检查文件内容**
   - 打开文件查看
   - 确认包含5行数据（不含表头）
   - 确认字段分隔符为逗号

### 2. 执行导入测试

1. **登录系统**
   - 打开浏览器
   - 访问系统地址
   - 使用管理员账号登录

2. **进入义工管理**
   - 点击左侧菜单"义工管理"

3. **打开导入对话框**
   - 点击右上角"导入"按钮

4. **上传CSV文件**
   - 点击上传区域
   - 选择 `test_import_5_volunteers.csv`
   - 等待系统解析

5. **预览数据**
   - 检查预览表格
   - 确认显示5条数据
   - 确认关键字段正确：
     - ✅ 姓名显示正确
     - ✅ 手机号显示正确
     - ✅ 深圳义工号显示正确（郭奕丽、刘新娣有号）
     - ✅ 性别显示正确
     - ✅ 出生日期显示正确
     - ✅ 地址显示正确

6. **确认导入**
   - 点击"确认导入"按钮
   - 等待导入完成
   - 查看导入结果

### 3. 验证导入结果

1. **检查数量**
   - 在义工列表中确认新增了5个义工

2. **搜索验证**
   - 搜索"刘金艳"，确认能找到
   - 搜索"13923923911"，确认能找到欧阳钟培
   - 搜索"0099120567"，确认能找到郭奕丽

3. **详细信息验证**
   - 点击查看郭奕丽的详情
   - 确认深圳义工号：0099120567
   - 确认法名：顿奕
   - 确认其他字段正确

4. **字段完整性验证**
   - 检查出生日期是否正确
   - 检查学历是否正确
   - 检查宗教背景是否为"佛教"
   - 检查皈依状态是否为"已皈依"
   - 检查健康状况是否为"很好"

## ✅ 预期结果

### 导入成功
- ✅ 成功导入：5个
- ✅ 失败：0个
- ✅ 跳过：0个（如果之前没有导入过）

### 数据正确性
- ✅ 所有姓名正确
- ✅ 所有手机号正确
- ✅ 所有身份证号正确
- ✅ 深圳义工号正确（有的显示，无的为空）
- ✅ 出生日期正确
- ✅ 学历正确
- ✅ 宗教背景为"佛教"
- ✅ 皈依状态为"已皈依"
- ✅ 健康状况为"很好"
- ✅ 法名正确（柯映卿、郭奕丽、刘新娣）

## ⚠️ 可能的问题

### 1. 重复数据
如果之前已经导入过这些义工，系统会提示：
- "手机号已存在"
- "身份证号已存在"
- "深圳义工号已存在"

**解决方案：**
- 先在系统中删除这些义工
- 或修改CSV文件中的手机号和身份证号

### 2. 编码问题
如果CSV文件显示乱码：

**解决方案：**
- 确保文件使用 UTF-8 编码
- 用文本编辑器打开，另存为 UTF-8 格式
- 或在 Excel 中另存为"CSV UTF-8"格式

### 3. 字段映射问题
如果某些字段没有正确导入：

**检查项：**
- CSV表头是否正确
- 字段值是否符合格式要求
- 日期格式是否为 YYYY-MM-DD

## 🧪 测试场景

### 场景1：首次导入
- 系统中没有这5个义工
- 预期：全部成功导入

### 场景2：部分重复
- 系统中已有郭奕丽和刘新娣
- 预期：
  - 成功导入：3个（刘金艳、欧阳钟培、柯映卿）
  - 跳过：2个（郭奕丽、刘新娣）

### 场景3：全部重复
- 系统中已有全部5个义工
- 预期：
  - 成功导入：0个
  - 跳过：5个

## 📊 测试检查清单

### 导入前
- [ ] 文件存在且可访问
- [ ] 文件编码为 UTF-8
- [ ] 文件包含表头行
- [ ] 文件包含5行数据

### 导入中
- [ ] 文件上传成功
- [ ] 系统解析成功
- [ ] 预览显示5条数据
- [ ] 预览显示深圳义工号
- [ ] 预览显示出生日期

### 导入后
- [ ] 导入结果显示成功
- [ ] 义工列表数量增加5个
- [ ] 搜索能找到新义工
- [ ] 详细信息完整
- [ ] 深圳义工号正确
- [ ] 法名正确显示

## 💡 测试技巧

### 1. 清理测试数据
如果需要重复测试，先删除之前导入的数据：
```
1. 在义工列表中搜索手机号
2. 选中这5个义工
3. 批量删除
4. 重新导入测试
```

### 2. 修改测试数据
如果需要测试不同场景，修改CSV文件：
```
- 修改手机号（避免重复）
- 修改身份证号（避免重复）
- 添加/删除深圳义工号
- 修改其他字段值
```

### 3. 验证字段映射
重点检查以下字段的映射是否正确：
- 学历：初中 → middle_school
- 学历：小学 → elementary
- 宗教背景：佛教 → upasaka
- 皈依状态：皈依 → refuge
- 健康状况：很好 → healthy

## 📞 遇到问题？

### 导入失败
1. 检查文件格式
2. 检查字段值
3. 查看浏览器控制台错误
4. 检查网络连接

### 数据不正确
1. 检查CSV文件内容
2. 确认字段映射规则
3. 查看导入日志
4. 手动修正错误数据

## 🎉 测试完成

测试完成后，确认：
- ✅ CSV导入功能正常
- ✅ 所有字段正确导入
- ✅ 深圳义工号正确显示
- ✅ 字段映射正确
- ✅ 数据完整性良好

---

**测试文件：** test_import_5_volunteers.csv  
**义工数量：** 5人  
**包含字段：** 16个  
**准备时间：** 2025年11月26日  
**状态：** ✅ 可以测试